# 概念框架

## 1-数据库系统
1. DBS
   1. 概述
      1. DB四概念
         1. 数据
         2. 数据库
         3. DBMS
         4. DBS
      2. 发展历史
         1. 人工管理阶段
         2. 文件系统阶段
         3. 数据库系统阶段
   2. 特点
         1. 数据结构化
         2. 数据的共享性高、冗余度低、易扩充
         3. 数据独立性高
         4. 数据由DBMS统一管理和控制
   3. 核心和基础
      1. 数据模型
         1. 分类（按应用目的）
            1. 数据库设计
               1. 概念模型
            2. 数据库实现
               1. 逻辑模型
               2. 物理模型
         2. 组成要素
            1. 数据结构
            2. 数据操作
            3. 数据的完整性约束条件
         3. 常用（逻辑）数据模型
            1. 层次模型
            2. 网状模型
            3. 关系模型
            4. 面向对象数据模型
            5. 对象关系数据模型
            6. 半结构化数据模型
   4. 结构：
      1. 分类（按使用者的角度）
         1. 开发者角度（内部结构）
            1. 三级模式结构
               1. 构成
                  1. 模式
                  2. 内模式
                  3. 外模式
               2. 转换方法
                  1. 两层映像
                     1. 组成
                        1. 外模式/模式映像
                        2. 模式/内模式映像
                     2. 目的：
                        1. 保证数据独立性
                           1. 逻辑独立性
                           2. 物理独立性
         2. 用户角度（外部结构）：C/S, B/S 等结构
   5. 组成
      1. 硬件平台及数据库
      2. 软件
         1. DBMS
         2. OS
         3. 开发工具
         4. 应用软件
      3. 人员
         1. DBA
            1. 作用
               1. 决定数据库中的信息内容和结构
               2. 决定数据库的存储结构和存取策略
               3. 定义数据的安全性要求和完整性约束条件
               4. 监控数据库的使用和运行
               5. DBS的改进和重组重构
         2. 其他人员

## 2-关系数据库
1. 关系（数据）模型
   1. 三要素
      1. 关系数据结构
         1. 关系
            1. 描述（型）
               1. 关系模式
            2. 集合
               1. 关系数据库
                  1. 描述（型）
                     1. 关系数据库模式
      2. 关系操作集合
         1. 基本/常用关系操作
            1. 组成
               1. 查询
                  1. 分类
                     1. 基本操作
                        1. 选择
                        2. 投影
                        3. 并
                        4. 差
                        5. 笛卡尔积
                     2. 导出操作
                        1. 交
                        2. 连接
                        3. 除
               2. 插入
               3. 删除
               4. 修改
            2. 特点
               1. 一次一集合
         2. 表达方式
            1. 关系数据语言
               1. 关系代数语言
                  1. 表达查询的方法
                     1. 运算
                        1. 传统集合运算
                           1. 并
                           2. 差
                           3. 交
                           4. 笛卡尔积
                        2. 专门关系运算
                           1. 选择
                           2. 投影
                           3. 连接
                           4. 除
               2. 关系演算语言
               3. 具有关系代数+关系演算双重特点的语言（SQL）
      3. 关系完整性约束条件
         1. 实体完整性
         2. 参照完整性
         3. 用户自定义的完整性

## 3-SQL
1. SQL
   1. 概述
      1. SQL基本概念
         1. 基本表
         2. 视图
         3. 存储文件
      2. 发展历史
   2. 特点
      1. 综合统一
      2. 高度非过程化
      3. 面向集合的操作方式
      4. 以同一种语法结构提供多种使用方式
      5. 语言简洁，易学易用
   3. 功能
      1. 数据定义
         1. 包括
            |                | 创建          | 删除        | 修改        |
            | :------------: | :------------ | :---------- | :---------- |
            | 模式(命名空间) | create schema | drop schema |             |
            |     基本表     | create table  | drop table  | alter table |
            |      视图      | create view   | drop view   |             |
            |      索引      | create index  | drow index  | alter index |
         2. 实质
            1. 更新数据字典
      2. 数据查询
         1. 分类
            1. 单表查询
            2. 连接查询
            3. 嵌套查询
            4. 集合查询
            5. 基于派生表的查询
      3. 数据更新
         1. 插入
         2. 修改
         3. 删除
   4. 注意事项
      1. 空值的处理
         1. 产生
         2. 判断
         3. 约束条件
         4. 运算
            1. 算数运算
            2. 比较运算
            3. 逻辑运算
      2. 视图的使用
         1. 操作
            1. 定义
            2. 查询
               1. 实现过程
                  1. 视图消解
                     1. 失败情况
            3. 更新
               1. 实现过程
                  1. 视图消解
                     1. 失败情况
         2. 作用/好处
            1. 视图能简化用户的操作
            2. 视图使用户能以不同角度看待同一数据
            3. 视图对重构数据库提供了一定的逻辑独立性
            4. 视图为数据提供了一定的安全性保护

## 4-数据库安全性
1. 数据库安全性
   1. 威胁
   2. 指导
      1. 安全标准
         1. TCSEC
         2. CC
   3. 保护措施
      1. 用户身份鉴别
      2. （多层）存取控制
         1. 自主存取控制方法（DAC）：通过 SQL 的 grant/revoke 语句实现
         2. 强制存取控制方法（MAC）
      3. 审计
      4. 视图机制
      5. 数据加密
      6. 其他安全性保护

## 5-数据库完整性
1. 数据库完整性
   1. 前提功能
      1. 提供定义完整性约束条件的机制（检查条件）
      2. 提供完整性检查的方法（何时检查：insert/update/delete）
      3. 进行违约处理（违约了如何操作）
   2. 分类
      1. 实体完整性
         1. 定义
         2. 检查+处理
      2. 参照完整性
         1. 定义
         2. 检查+处理
      3. 用户自定义完整性
         1. 定义
            1. 属性上
            2. 元组上：多属性
         2. 检查+处理
   3. 定义
      1. create table 时，直接添加
      2. create table 中 constraint 子句
      3. alter table 添加或删除 constraint
      4. create assertion
   4. 灵活的推广：触发器（事件驱动的特殊过程）
      1. 定义
      2. 激活（事件）
      3. 删除

## 6-关系数据理论
1. why：为了构造好的关系模式，避免出现插入/删除/更新异常，减少数据冗余
2. 基本概念
   1. 数据依赖：sname 函数依赖于 sno 就是 sno 函数决定 sname 的意思，记作 sno->sname
      1. 函数依赖
      2. 多值依赖
   2. 码
   3. 范式
      1. 2NF
      2. 3NF
      3. BCNF
      4. 4NF

## 7-数据库设计
1. 特点
2. 方法
3. 基本步骤
   1. 需求分析
      1. 任务
      2. 方法
      3. 成果：数据字典（关于数据库中数据的描述，即元数据）
   2. 概念结构设计
      1. 将需求抽象：概念模型
         1. 特点
         2. 描述方法：E-R 图
      2. 关键技术
         1. 实体与属性划分原则
         2. E-R 图的集成：将各个小部分 E-R 图合成一个
   3. 逻辑结构设计
      1. E-R 图向关系模型转换
      2. 数据模型的优化
      3. 设计用户子模式（视图，为了便于使用+增强安全性）
   4. 物理结构设计：为给定的逻辑结构选择最适合应用要求的物理结构
      1. 步骤（内容）
         1. 确定物理结构
            1. 存取方法
               1. 索引方法
                  1. B+树索引
                  2. hash 索引
               2. 聚簇方法
            2. 设计关系、索引等数据库文件的物理结构
               1. 确定数据存放位置
               2. 确定系统配置
         2. 对物理结构评价
            1. 时间效率
            2. 空间效率
            3. 维护代价
            4. 用户要求
   5. 数据库实施
      1. 数据的载入
      2. 应用程序的编码和调试（APP 的设计应与 DB 的设计同时进行）
   6. 数据库运行和维护
      1. 试运行：小部分数据+联合调试
      2. 正式运行时的维护工作：
         1. DB 的转储和恢复
         2. DB 的安全性、完整性控制
         3. DB 性能的监督、分析、改造（改系统参数）
         4. DB 的重组织+重构造（改 DB）
4. 各级模式：数据库设计的不同阶段形成数据库的各级模式
   1. 概念模式
   2. 逻辑模式
   3. 内模式

## 8-数据库编程
1. 嵌入式 SQL：嵌入主语言中
2. 过程化 SQL：SQL 是高度非过程化的语言，过程化 SQL 是对它的扩展，增加了过程化的语句功能。其基本结构是块
   1. 匿名块（不能被存储）
   2. 命名块（能被存储，也叫持久性存储模块 PSM，可被反复调用）
      1. 存储过程
      2. 函数：与存储过程类似，不同点在于必须返回你指定的类型
3. ODBC：为了更好的开放性/兼容性，方便访问不同的 DBMS，由微软提出的接口标准

## 9-关系查询处理和查询优化
1. 查询处理步骤
   1. 查询分析：
      1. 词法分析
      2. 语法分析
   2. 查询检查：
      1. 语义分析
      2. 符号名转换
      3. 安全性检查
      4. 完整性初步检查
      5. 转换为查询树（query tree，即 syntax tree，是关系代数表达式的内部表示）
   3. 查询优化
      1. 代数优化：将关系代数等价变换为效率更高的形式
         1. 等价变换规则
            1. 应用：启发式规则（是指在大多数情况下都适用，但不一定总是最优的）
      2. 物理优化
         1. 基于规则的启发式优化（是指在大多数情况下都适用，但不一定总是最优的）
         2. 基于代价估算（优化器来估算）
         3. 两者结合的优化方法
   4. 查询执行：
      1. 优化器得到执行策略-》查询执行计划
      2. 代码生成器-》生成执行该计划的代码
         1. 实现查询的算法思想
            1. 选择操作
               1. 简单全表扫描
               2. 索引扫描算法
            2. 连接操作
               1. 嵌套循环算法
               2. 排序合并算法
               3. 索引连接算法
               4. hash join 算法
      3. 执行-》回送查询结果

## 10-数据库恢复技术
1. 事务：用户定义的数据库操作序列，这些操作要么全做，要么全不做，是一个不可分割的工作单位。（是恢复和并发控制的基本单位，是数据库应用程序的基本逻辑单元）
   1. 性质：ACID 特性
      1. 原子性
      2. 一致性（DB 的最基本要求）
      3. 隔离性
      4. 持续性
2. 数据库恢复：DBMS 把数据库从因**故障**导致的错误状态中恢复到某一已知的正确状态的功能
   1. 故障的种类
      1. **事务内部的故障**（一般是非预期的，不能由应用处理的，所以一般应对是 undo。主要讨论这个）
      2. 系统故障
      3. 介质故障（最严重）
      4. 计算机病毒
   2. 恢复的实现
      1. 建立冗余数据
         1. 数据转储（备份）
            1. 前沿：数据库镜像
               1. 优点：数据库恢复，提高可用性，提高并发性能
               2. 缺点：通过复制数据实现，降低系统效率。故一般只对关键数据和日志文件进行镜像
         2. 登记日志文件（用来记录事务对 DB 更新操作的文件）
            1. 改善恢复效率：检查点
               1. 文件
                  1. 定时在日志中建立检查点记录（记录此时的事务，和它们的日志地址）
                  2. 增加了一个**重新开始文件**（检查点记录地址的索引）
               2. 恢复步骤
      2. 利用冗余数据恢复 DB
         1. 恢复策略
            1. 事务故障恢复
            2. 系统故障恢复
            3. 介质故障恢复

## 11-并发控制
1. 并发控制：保持事务的隔离性和一致性，使事务的执行相互之间不受干扰，DBMS 对并发操作进行正确的调度
   1. 不一致问题：
      1. 丢失修改
      2. 不可重复读
      3. 读脏数据
   2. 主要技术
      1. **封锁**：事务对某个数据对象（表/记录）向系统申请加锁
         1. 类型
            1. 排他锁（写锁/X 锁）：T 锁 A，则 T 可以读写 A，其他事务不能加任何锁，也不能读写
            2. 共享锁（读锁/S 锁）：T 锁 A，则 T 可以读（但不能写）A，其他事务只能加 S 锁，加后才可读
         2. 规则：封锁协议（为了保证一致性制定的**何时申请/释放锁**的规则）
            1. 一级
            2. 二级
            3. 三级
         3. 问题
            1. 活锁
            2. 死锁
         4. 粒度：封锁对象的大小（可以是逻辑单元，也可以是物理单元）
            1. 理想方法：多粒度封锁（该方法中显示封锁和隐式封锁效果是一样的）
               1. 多粒度树
               2. 意向锁：如果对一个结点加意向锁，说明其下层（后代）节点正在被锁。对节点加锁时须对起上层节点（祖先）加意向锁。（提高了系统的并发度，减小了加/解锁的开销）
      2. 时间戳
      3. 乐观控制法
      4. 多版本并发控制
   3. 正确调度的准则：可串行性
      1. 充分条件：冲突可串行化调度
         1. 冲突：不同事务对同一个数据的读写操作和写写操作
      2. 实现手段：两段锁协议

## 12-数据库管理系统
1. 基本功能
   1. 数据库的定义和创建
   2. 数据组织、存储、管理
   3. 数据存取
   4. 数据库事务管理和运行管理
   5. 数据库的建立和维护
   6. 其他功能
2. 系统结构
   1. 层次结构：按处理对象划分
      1. 应用层：应用
      2. 语言处理层：SQL
         1. 任务：把数据库语句转换成 DBMS 可执行的存取模块的调用序列，这一过程叫束缚（bind）
         2. 工作步骤：和查询处理的步骤类似
         3. 转换（翻译）方法：
            1. 解释方法
            2. 预编译方法
      3. 数据存取层：单个元组
         1. 系统结构：多个功能子系统（构成）
            1. 记录存取、事务管理子系统
            2. 日志等级子系统
            3. 控制信息管理模块
            4. 排序/合并子系统
            5. 存取路径维护子系统
            6. 封锁子系统
      4. 数据存储层：数据页+系统缓冲区
         1. 缓冲区管理
         2. 物理组织
            1. 数据字典的组织
            2. 数据及数据联系的组织
            3. 存取路径的组织
3. 运行过程

## 13-数据库技术发展概述
1. 发展历史
   1. 三个阶段：按数据模型的发展划分
      1. 第一代 DBS：格式化模型
         1. 层次
         2. 网状
      2. 第二代 DBS：关系数据模型
      3. 新一代 DBS：面向对象、对象关系
         1. 三个基本特征
2. 发展特点
   1. DB 的发展集中表现在：数据模型的发展，产生新数据模型
      1. 面向对象数据模型
      2. XML 数据模型（半结构化数据模型）
      3. RDF 数据模型（资源描述框架）
   2. 与相关（硬件）技术相结合：产生新的数据库技术
      1. 分布式数据库系统：集中式 DBS+计算机网络
      2. 并行数据库系统：处理器+存储+网络
   3. 特定应用领域：产生新的数据库技术
      1. 工程数据库：管理工程设计图形
      2. 空间数据库：管理空间数据+属性数据
3. 发展趋势
   1. 未来挑战
   2. 发展展望
      1. NoSQL：（例如 MapReduce）

## 14-大数据管理
1. 大数据：无法在可容忍时间范围内，用现有 IT 技术和软硬件工具进行感知+获取+管理+处理+服务的数据集合
   1. 特征
      1. 巨量：数据量大，在持续、急剧地增长
      2. 多样：异构（非结构/半结构）的数据类型，不同的数据表述+语义解释
      3. 快变：实时性（采集/传输/处理/响应快）
      4. 价值：巨大的经济/产业/科学价值
      5. （真实性）：IBM 强调-数据质量的重要性
   2. 应用
      1. 分类
         1. 感知现在+预测未来：互联网文本大数据管理与挖掘
         2. 数据服务+实时推荐：基于大数据分析的用户建模
      2. 基础：大数据管理系统
         1. 新技术
            1. NoSQL DBS：以互联网大数据为背景，`Not Only SQL`
            2. NewSQL DBS：融合了 NoSQL 和传统 DBS
            3. MapReduce：并行编程模型
         2. 新格局
            1. 面向操作型应用
               1. 关系数据库技术：高一致性、高精确度、可恢复性
               2. NoSQL 技术：大数据量、大量读写、高性能、高扩展性/灵活性，弱一致性（或最终一致性）
            2. 面向分析型应用
               1. 关系数据库技术：列存储数据库、内存数据库
               2. MapReduce 技术：简单易用、高扩展性、高容错性

## 15-内存数据库系统
1. 内存数据库：将内存作为主存储设备的 DBS
   1. 历史
   2. 特性
      1. 高吞吐率+低访问延迟
      2. 并行处理能力
      3. 硬件相关性
   3. 关键技术
      1. 数据存储（模型）
         1. 行存储模型
         2. 列存储模型
         3. 混合存储模型
      2. 查询处理+优化
         1. 面向 cache 特性的优化技术
         2. 索引技术
         3. 面向多核的查询处理技术
         4. 面向众核的查询处理技术
      3. 并发+恢复

## 16-数据仓库与联机分析处理技术
1. 数据仓库技术：为了构建新的**分析处理**环境而出现的一种数据存储和组织技术
   1. 基本特征
      1. 主题与面向主题：高层次抽象
      2. 数据仓库是集成的：对数据进行加工与集成
      3. 不可更新：分析处理时不可更新
      4. 随时间变化
   2. 数据组织：按处理的程度分为多个级别，以提高联机分析的效率
      1. 早期细节级
      2. 当前细节级
      3. 轻度综合级
      4. 高度综合级
   3. 体系结构
      1. 数据仓库后台工具：数据抽取、清洗、转换、转载、维护工具
      2. 数据仓库服务器：相当于 DBS 中的 DBMS，负责管理数据的存储+存取
      3. OLAP 服务器：透明地为前台工具和用户提供多维数据视图
2. 联机分析处理（OLAP）技术：以海量数据为基础的复杂分析技术。
   1. 特点：多角度分析
      1. 多维数据模型：多维数组
      2. 多维分析操作：切片、切块、旋转等
   2. OLAP 服务器结构：按多维数据模型的实现方式分为
      1. MOLAP：以多维立方体组织数据，以多维数组存储数据。支持直接对多维数据的各种操作，也叫多维数据库 MDDB
      2. ROLAP：用（拓展的）关系数据来管理多维数据。将多维立方体结构分为事实表（存度量值+各个维的码值），维表（存维信息）
      3. HOLAP：MOLAP 和 ROLAP 的混合结构
